## 12.0.0

_Released MM/DD/YYYY_

**Breaking Changes:**

- Cypress dropped support for Node 12. Use Node 14+. Addressed in
  [#24885](https://github.com/cypress-io/cypress/pull/24885).
- `experimentalSessionAndOrigin` flag has been removed and all functionality is
  now enabled by default now. Addresses
  [#21471](https://github.com/cypress-io/cypress/issues/21471).

- The new concept of `testIsolation` has been introduced and it defaults to
  `on`.
  - Changes the testIsolation configuration values from on or off to true or
    false. Addressed in
    [#24935](https://github.com/cypress-io/cypress/pull/24935).
- Cypress now throws an error if any Cypess commands are invoked from inside a
  `.should()` callback. This previously resulted in unusual and undefined
  behavior; it is now explicitly an error.

  - Addresses [#5963](https://github.com/cypress-io/cypress/issues/5963)
  - Addresses [#14656](https://github.com/cypress-io/cypress/issues/14656)
  - Addresses [#22587](https://github.com/cypress-io/cypress/issues/22587)

- `Cookies.defaults` and `Cookies.preserveOnce` have been removed. Please update
  to use [`cy.session()`](/api/commands/session) to preserve session details
  between tests. Addresses
  [#21472](https://github.com/cypress-io/cypress/issues/21472).

- The` cy.server()` and` cy.route()` commands and the `Cypress.Server.defaults`
  API has been removed. Use [`cy.intercept()`(/api/commands/intercept) instead.
  Addresses [#22126](https://github.com/cypress-io/cypress/issues/22126).

- To aligns with browser cookie rules, the Cookie commands now uses the the
  hostname, not the superdomain, as the domain by default. This may affect what
  cookies are returned by `cy.getCookie()`, `cy.setCookie()`, and
  `cy.clearCookies()`. set/cleared by cookie commands.
  - Addresses [#363](https://github.com/cypress-io/cypress/issues/363)
  - Addresses [#5723](https://github.com/cypress-io/cypress/issues/5723)
  - Addresses [#24526](https://github.com/cypress-io/cypress/issues/24526)

FEAT:

- experimentalRunAllSpecs: Allow running all specs regardless of folder
  structure by adding a top-level run-all button. Addresses
  [#24759](https://github.com/cypress-io/cypress/issues/24759).

- Added `cy.getAllLocalStorage()` command. Addresses
  [#24276](https://github.com/cypress-io/cypress/issues/24276).
- Added `cy.clearAllLocalStorage()` command. Addresses
  [#24276](https://github.com/cypress-io/cypress/issues/24276).
- Added `cy.getAllSessionStorage()` command. Addresses
  [#24277](https://github.com/cypress-io/cypress/issues/24277).
- Added `cy.clearAllSessionStorage()` command. Addresses
  [#24277](https://github.com/cypress-io/cypress/issues/24277).

Creates and adds types to `Cypress.ensure` API, which can be useful for creating
custom queries. This new API is based off the previously undocumented
cy.ensure\* methods, which are now removed. Addressed in
[#24697](https://github.com/cypress-io/cypress/pull/24697).

<!-- - Added public types to the internal `cy.now()` command. -->

- Added new experimentalOriginDependencies flag to enable support for
  request/import within cy.origin. Previously this feature was enabled with the
  experimentalSessionAndOrigin flag.
  [#24931](https://github.com/cypress-io/cypress/pull/24931).

FIX:

- npm config set VAR VAL will inject npm_config_var=val environment variable-
  Fixes [#24556](https://github.com/cypress-io/cypress/issues/24556).
- Fixes "Create Spec from Component" to better handle special characters in
  filenames. Fixes [#23492](https://github.com/cypress-io/cypress/issues/23492).

- Getting an alias for an intercepted call will now log the yielded object.
  CONSOLE PROPS FOR CY.incercept().as() UPDATE. Fixed in
  [#24623](https://github.com/cypress-io/cypress/pull/24623).

If cy.getCookie() fails to find a cookie, you can no longer traverse the
non-existent cookie's properties (eg, with .its('value)). If you expect a cookie
not to exist, assert that directly, eg:
cy.getCookie('foo1').should('not.exist'). Addressed in
[#24203](https://github.com/cypress-io/cypress/pull/24203).

DEP:

Addresses [#](https://github.com/cypress-io/cypress/issues/) Fixes
[#](https://github.com/cypress-io/cypress/issues/)
