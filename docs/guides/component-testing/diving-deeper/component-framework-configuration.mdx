---
<<<<<<< HEAD:docs/guides/component-testing/diving-deeper/component-framework-configuration.mdx
title: Framework Configuration
sidebar_position: 10
=======
title: Component Testing Config
>>>>>>> react-ct-guide-rework:content/guides/component-testing/component-framework-configuration.md
---

<CtBetaAlert></CtBetaAlert>

When you launch Cypress for the first time in a project, the app will
automatically guide you through setup and configuration. You don't need to do
anything additional to get started.

Refer to the "Framework Configuration" guide in each UI framework's overview
guide for a list of supported development servers and how they are configured.

Below are more advanced configuration options you can customize to fit your
project.

<<<<<<< HEAD:docs/guides/component-testing/diving-deeper/component-framework-configuration.mdx
## Automatic Configuration (Recommended)

When you launch Cypress for the first time in a project and select Component
Testing, the app will automatically guide you and set up your configuration.

Cypress offers **automatic configuration** for supported front-end frameworks
and bundlers.

For first-time setup of React or Vue apps, we strongly recommend using automatic
configuration to create all of the necessary configuration files.

### Automatic Configuration Setup

You should use the Cypress Launchpad to configure Component Testing for the
first time. To start the setup wizard, simply open Cypress and choose "Component
Testing".

<!-- TODO: Video -->

```shell
cypress open
```

The Launchpad's setup wizard will do the following things:

1. Determine what changes need to be merged into your Cypress Config file.
2. Create a component support file for configuring global styles and installing
   component libraries.
3. Globally register the correct `cy.mount` command based on your framework.
4. Create `component-index.html` to let you add your application's fonts and
   global CDN downloads.
5. Add any framework-specific setup to your support files.

<!-- TODO: pic of all the files we make, collapsed -->

Once you click through all of the prompts, you'll be asked to choose a browser
to continue.

<!-- TODO: start cypress, take a pic of Choose a Browser -->

## Manual Setup

The rest of this guide covers configuring your project manually.

### Prerequisites

- [Install](/guides/getting-started/installing-cypress) Cypress.
- Create an empty cypress.config.js (or .ts) file at the root of your project.
- Create an empty cypress/support/component.js (or .ts) file.

Next, follow the instructions for your framework.

## React

For React apps, we have built-in support for Create React App, Next.js, Vite,
and a custom webpack config.

### Create React App (CRA)

To configure component testing for a React app that uses
[Create React App](https://create-react-app.dev/), you will need to configure a
`devServer` with a `framework` of "create-react-app" and a `bundler` of
"webpack" like so:

:::cypress-config-example

```ts
{
  component: {
    devServer: {
      framework: 'create-react-app',
      bundler: 'webpack',
    },
  },
}
```

:::

#### Sample Create React Apps

- [CRA 4 with JavaScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/react-cra4-js)
- [CRA 5 with TypeScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/react-cra5-ts)

### Next.js

:::caution

Next.js is currently in alpha support for component testing. See
[Next.js Caveats](#Next-js-Caveats) for more info on current limitations.

:::

To configure component testing for a React app that uses
[Next.js](https://nextjs.org/), you will need to configure a `devServer` with a
`framework` of "next" and a `bundler` of "webpack" like so:

:::cypress-config-example

```ts
{
  component: {
    devServer: {
      framework: 'next',
      bundler: 'webpack',
    },
  },
}
```

:::

#### Next.js Caveats

There are some specific caveats to consider when testing Next.js
[Pages](https://nextjs.org/docs/basic-features/pages) in component testing.

A page component could have additional logic in its `getServerSideProps` or
`getStaticProps` methods. These methods only run on the server, so they are not
available to run inside a component test. Trying to test a page in a component
test would result in the props being passed into the page to be undefined.

While you could pass in props directly to the page component in a component
test, that would leave these server-side methods untested. However, an
end-to-end test would execute and test a page entirely.

Because of this, we recommend using E2E Testing over Component Testing for
Next.js pages and Component Testing for individual components in a Next.js app.

#### Sample Next.js Apps

- [Next.js 12 with TypeScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/react-next12-ts)

### React with Vite

To configure component testing for a React app that uses
[Vite](https://vitejs.dev/), you will need to configure a `devServer` with a
`framework` of "react" and a `bundler` of "vite" like so:

:::cypress-config-example

```ts
import customViteConfig from './customConfig'
```

```ts
{
  component: {
    devServer: {
      framework: 'react',
      bundler: 'vite',
      // optionally pass in vite config
      viteConfig: customViteConfig,
      // or a function - the result is merged with
      // any `vite.config` file that is detected
      viteConfig: async () => {
        // ... do things ...
        const modifiedConfig = await injectCustomConfig(baseConfig)
        return modifiedConfig
      },
    },
  },
}
```

:::

#### Sample React Vite Apps

- [React Vite with TypeScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/react-vite-ts)

### React with Webpack

To configure component testing for a React app that uses a custom
[Webpack](https://webpack.js.org/) config, you will need to configure a
`devServer` with a `framework` of "react" and a `bundler` of "webpack" like so:

:::cypress-config-example

```ts
import webpackConfig from './webpack.config'
```

```ts
{
  component: {
    devServer: {
      framework: 'react',
      bundler: 'webpack',
      // optionally pass in webpack config
      webpackConfig,
      // or a function - the result is merged with any
      // webpack.config that is found
      webpackConfig: async () => {
        // ... do things ...
        const modifiedConfig = await injectCustomConfig(baseConfig)
        return modifiedConfig
      },
    },
  },
}
```

:::

If you don't provide a webpack config, Cypress will try to infer it. If Cypress
cannot do so, or you want to make modifications to your config, you can specify
it via the `webpackConfig` option.

#### Sample React Webpack Apps

- [React Webpack 5 with JavaScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/react-webpack5-js)

<!-- Couldn't simply call this next section "Vue" because using "## Vue" by itself killed the tabs in the code examples -->

## Vue 2 & Vue 3

For Vue apps, we have built-in support for Vue CLI, Nuxt, Vite, and a custom
webpack config.

### Vue CLI

To configure component testing for a Vue app that uses
[Vue CLI](https://cli.vuejs.org/), you will need to configure a `devServer` with
a `framework` of "vue-cli" and a `bundler` of "webpack" like so:

:::cypress-config-example

```ts
{
  component: {
    devServer: {
      framework: 'vue-cli',
      bundler: 'webpack',
    },
  },
}
```

:::

:::caution

<strong>PWA Caveat</strong>

If you use the Vue CLI's PWA feature, there is a known caveat regarding
configuration. See
[here](https://github.com/cypress-io/cypress/issues/15968#issuecomment-819170918)
for more information.

:::

#### Sample Vue CLI Apps

- [Vue 3 CLI 5 with TypeScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/vue3-cli5-ts)
- [Vue 2 CLI 4 with JavaScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/vue2-cli4-js)

### Nuxt

:::caution

Nuxt is currently in alpha support for component testing.

:::

To configure component testing for a Vue app that uses
[Nuxt](https://nuxtjs.org/), you will need to configure a `devServer` with a
`framework` of "nuxt" and a `bundler` of "webpack" like so:

:::cypress-config-example

```ts
{
  component: {
    devServer: {
      framework: 'nuxt',
      bundler: 'webpack',
    },
  },
}
```

:::

#### Nuxt Sample Apps

- [Vue 2 Nuxt 2 with JavaScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/vue2-nuxt2-js)

### Vue with Vite

To configure component testing for a Vue app that uses
[Vite](https://vitejs.dev/), you will need to configure a `devServer` with a
`framework` of "vue" and a `bundler` of "vite" like so:

:::cypress-config-example

```ts
{
  component: {
    devServer: {
      framework: 'vue',
      bundler: 'vite',
    },
  },
}
```

:::

#### Vue Vite Sample Apps

- [Vue 3 Vite with TypeScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/vue2-nuxt2-js)

### Vue with Webpack

To configure component testing for a Vue app that uses a custom
[Webpack](https://webpack.js.org/) config, you will need to configure a
`devServer` with a `framework` of "vue" and a `bundler` of "webpack" like so:

:::cypress-config-example

```ts
import webpackConfig from './webpack.config'
```

```ts
{
  component: {
    devServer: {
      framework: 'vue',
      bundler: 'webpack',
      // optionally pass in webpack config
      webpackConfig,
      webpackConfig: async () => {
        // ... do things ...
        const modifiedConfig = await injectCustomConfig(baseConfig)
        return modifiedConfig
      },
    },
  },
}
```

:::

If you don't provide one, Cypress will try to infer your webpack config. If
Cypress cannot or you want to make modifications to your config, you can pass it
in manually via the `webpackConfig` option.

#### Vue Webpack Sample Apps

- [Vue 3 Webpack 5 with TypeScript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/vue3-webpack-ts)

## Angular

For Angular apps, we have built-in support for `@angular/cli` projects.

### Angular CLI

To configure component testing for an Angular application that uses the
[Angular CLI](https://angular.io/cli), you will need to configure a `devServer`
with a `framework` of "angular", a `bundler` of "webpack" and a `specPattern`
like so:

:::cypress-config-example

```ts
{
  component: {
    devServer: {
      framework: 'angular',
      bundler: 'webpack',
    },
    specPattern: '**/*.cy.ts',
  },
}
```

:::

#### Options API

You can also use the `options` API to provide your own project specific
configuration to your `devServer`. The `devServer` configuration receives an
`options` property:

:::cypress-config-example

```ts
{
  component: {
    framework: 'angular',
    bundler: 'webpack',
    options: {
      projectConfig: {
        root: '',
        sourceRoot: 'apps/my-app',
        buildOptions: {
          outputPath: 'dist/my-app',
          index: 'apps/my-app/src/index.html',
          main: 'apps/my-app/src/main.ts',
          polyfills: 'apps/my-app/src/polyfills.ts',
          tsConfig: 'apps/my-app/tsconfig.app.json',
          inlineStyleLanguage: 'scss',
          assets: ['apps/my-app/src/favicon.ico', 'apps/my-app/src/assets'],
          styles: ['apps/my-app/src/styles.scss'],
          scripts: [],
          buildOptimizer: false,
          optimization: false,
          vendorChunk: true,
          extractLicenses: false,
          sourceMap: true,
          namedChunks: true,
        },
      },
    },
  },
}
```

:::

#### Sample Angular Apps

- [Angular 14](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/angular)

## Svelte

:::caution

Svelte is currently in alpha support for component testing.

:::

For Svelte apps, we have built-in support for Vite and Webpack.

### Svelte with Vite

To configure component testing for a Svelte app that uses
[Vite](https://vitejs.dev/), you will need to configure a `devServer` with a
`framework` of "svelte" and a `bundler` of "vite" like so:

:::cypress-config-example

```ts
{
  component: {
    devServer: {
      framework: 'svelte',
      bundler: 'vite',
    },
  },
}
```

:::

#### Svelte Vite Sample Apps

- [Svelte 3 Vite 3 with Typescript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/svelte-vite-ts)

### Svelte with Webpack

To configure component testing for a Svelte app that uses a custom
[Webpack](https://webpack.js.org/) config, you will need to configure a
`devServer` with a `framework` of "svelte" and a `bundler` of "webpack" like so:

:::cypress-config-example

```ts
import webpackConfig from './webpack.config'
```

```ts
{
  component: {
    devServer: {
      framework: 'svelte',
      bundler: 'webpack',
      // optionally pass in webpack config
      webpackConfig,
    },
  },
}
```

:::

If you don't provide one, Cypress will try to infer your webpack config. If
Cypress cannot or you want to make modifications to your config, you can pass it
in manually via the `webpackConfig` option.

#### Svelte Webpack Sample Apps

- [Svelte 3 Webpack 5 with Typescript](https://github.com/cypress-io/cypress-component-testing-apps/tree/main/svelte-webpack-ts)

## Component Testing Config

Below are a few additional configuration values that are specific to component
testing.

### Custom Dev Server
=======
## Custom Dev Server
>>>>>>> react-ct-guide-rework:content/guides/component-testing/component-framework-configuration.md

A custom function can be passed into the `devServer` option, which allows the
use of other dev servers not provided by Cypress out of the box. These can be
from the Cypress community, preview builds not included with the app, or a
custom one you create.

The function's signature takes in a
[Cypress Configuration](/guides/references/configuration) object as its only
parameter and returns either an instance of a `devServer` or a promise that
resolves to a `devServer` instance.

:::cypress-config-example

```ts
{
  component: {
    devServer(cypressConfig: CypressConfiguration) {
      // return devServer instance or a promise that resolves to
      // a dev server here
      return {
        port: 1234,
        close: () => {},
      }
    },
  },
}
```

:::

## Custom Index File

By default, Cypress renders your components into an HTML file located at
`cypress/support/component-index.html`.

The index file allows you to add in global assets, such as styles, fonts, and
external scripts.

You can provide an alternative path to the file using the `indexHtmlFile` option
in the [component config](/guides/references/configuration#component) options:

:::cypress-config-example

```ts
{
  component: {
    //highlight-next-line
    indexHtmlFile: '/custom/path/to/component-index.html'
  }
}
```

<<<<<<< HEAD:docs/guides/component-testing/diving-deeper/component-framework-configuration.mdx
:::

### Spec Pattern for Component Tests
=======
## Spec Pattern for Component Tests
>>>>>>> react-ct-guide-rework:content/guides/component-testing/component-framework-configuration.md

By default, Cypress looks for spec files anywhere in your project with an
extension of `.cy.js`, `.cy.jsx`, `.cy.ts`, or `.cy.tsx`. However, you can
change this behavior for component tests with a custom `specPattern` value. In
the following example, we've configured Cypress to look for spec files with
those same extensions, but only in the `src` folder or any of its
subdirectories.

:::cypress-config-example

```ts
{
  component: {
    //highlight-next-line
    specPattern: 'src/**/*.cy.{js,jsx,ts,tsx}'
  }
}
```

<<<<<<< HEAD:docs/guides/component-testing/diving-deeper/component-framework-configuration.mdx
:::

### Additional Config
=======
## Additional Config
>>>>>>> react-ct-guide-rework:content/guides/component-testing/component-framework-configuration.md

For more information on all the available configuration options, see the
[configuration reference](/guides/references/configuration).
