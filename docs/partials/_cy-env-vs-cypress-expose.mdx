Both [`cy.env()`](/api/commands/env) and [`Cypress.expose()`](/api/cypress-api/expose) provide access to configuration values in Cypress, but they serve different security and execution needs. Choosing the right API helps avoid accidental exposure of sensitive data and keeps configuration intent clear.

#### Use `Cypress.expose()` for public configuration

Recommended when:

- **Values are public or non-sensitive** - Examples include feature flags, API versions, environment labels, or plugin configuration that is safe to appear in browser state.
- **Synchronous access is needed** - `Cypress.expose()` returns values immediately, without requiring Cypress command chaining.
- **Access is needed outside cy command contexts** - `Cypress.expose()` can be used in plugins or support files that run outside of `cy` command contexts.

#### Use `cy.env()` for sensitive or privileged values

Choose `cy.env()` when security, scoping, and controlled access matter.

- **Values are sensitive** - API keys, passwords, tokens, or any data that should not be broadly exposed to the browser.
- **Security is a priority** - `cy.env()` only exposes the variables you explicitly request and does not automatically serialize them into browser state.
- **You're already working within Cypress command chains**: `cy.env()` is asynchronous and designed to be used inside Cypress tests and hooks.

**Example: choosing the right API**

```javascript
// ✅ Use cy.env() for sensitive values
cy.env(['apiKey']).then(({ apiKey }) => {
  cy.request({
    url: 'https://api.example.com/users',
    headers: { Authorization: `Bearer ${apiKey}` },
  })
})

// ✅ Use Cypress.expose() for public configuration
const apiVersion = Cypress.expose('apiVersion') // Synchronous, public value
const featureFlag = Cypress.expose('featureFlag') // Safe to expose in browser
```