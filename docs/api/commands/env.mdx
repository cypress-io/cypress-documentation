---
title: 'env | Cypress Documentation'
description: Securely read environment variables in Cypress tests using cy.env(). Learn syntax, examples, security benefits, and how to migrate from Cypress.env().
sidebar_label: env
sidebar_custom_props: { 'new_label': true }
---

<ProductHeading product="app" />

# env

Securely read environment variables set in your Cypress configuration, `cypress.env.json`, or `CYPRESS_*` environment variables from within Cypress tests.

:::info

**Read-Only Command**

`cy.env()` is **read-only** and can only retrieve environment variables. It cannot set or modify environment variables. To set environment variables, use one of the supported methods described in the [Environment Variables & Secrets](/app/guides/environment-variables) guide.

:::

## Syntax

```javascript
cy.env(keys)
cy.env(keys, options)
```

### Usage

<Icon name="check-circle" color="green" /> **Correct Usage**

:::cypress-config-example

```javascript
{
  env: {
    apiUrl: 'https://api.example.com',
    apiKey: 'secret-key-12345'
  },
  expose: {
    environment: 'staging', // Public configuration value
  },
}
```

:::

```javascript
// Get a single environment variable
cy.env(['apiUrl']).then(({ apiUrl }) => {
  cy.request(`${apiUrl}/users`).its('status').should('eq', 200)
})

// Get multiple environment variables
cy.env(['apiUrl', 'apiKey']).then(({ apiUrl, apiKey }) => {
  cy.request({
    url: `${apiUrl}/users`,
    headers: { Authorization: `Bearer ${apiKey}` },
  })
    .its('status')
    .should('eq', 200)
})

// With options
cy.env(['apiUrl'], { log: false}).then(({ apiUrl }) => {
  // Use apiUrl
})
```

### Arguments

<Icon name="angle-right" /> **keys _(String[])_**

An array of environment variable keys to retrieve from Cypress. These environment variables
can be set via any of the methods described in the [Environment Variables & Secrets](/app/guides/environment-variables) guide. 

Environment variables cannot be set using [test configuration](/app/references/configuration#Test-Configuration) when `allowCypressEnv` is set to `false`.

If a variable is not defined, its value will return `undefined` in the returned object.

<Icon name="angle-right" /> **options _(Object)_**

Pass an options object to change the default behavior of `cy.env()`.

| Option    | Default | Description                                                                                                                            |
| --------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------- |
| `log`     | `true`  | Displays the command in the [Command log](/app/core-concepts/open-mode#Command-Log). **Only variable names are logged, never values.** |
| `timeout` | 4000    | Time to wait for `cy.env()` to resolve before timing out.                                                                              |

<HeaderYields />

`cy.env()` yields an object with the values found for the environment variable keys requested.

```javascript
cy.env(['apiUrl', 'apiKey']).then((env) => {
  // env = { apiUrl: 'https://api.example.com', apiKey: 'secret-key-12345' }
})
```

## Examples

### Single Variable

Get a single environment variable:

```javascript
cy.env(['apiUrl']).then(({ apiUrl }) => {
  cy.visit(apiUrl)
})
```

### Multiple Variables

Get multiple environment variables at once:

```javascript
cy.env(['apiUrl', 'apiKey', 'timeout']).then(({ apiUrl, apiKey, timeout }) => {
  cy.request({
    url: `${apiUrl}/users`,
    headers: { Authorization: `Bearer ${apiKey}` },
    timeout: timeout || 5000,
  })
})
```

### Use environment variables across tests

Store environment variables for use across multiple tests by using a `before()` hook:

```javascript
describe('API tests', () => {
  let apiBaseUrl

  before(() => {
    cy.env(['apiBaseUrl']).then(({ apiBaseUrl: url }) => {
      apiBaseUrl = url
    })
  })

  it('can make requests', () => {
    cy.request(`${apiBaseUrl}/users`).its('status').should('eq', 200)
  })
})
```

### Handle required vs optional variables

Variables that are not set will be `undefined`:

```javascript
cy.env(['requiredVar', 'optionalVar']).then(({ requiredVar, optionalVar }) => {
  if (requiredVar === undefined) {
    throw new Error('requiredVar must be set in Cypress configuration')
  }

  // Use optionalVar only if it's defined
  if (optionalVar) {
    // Use optionalVar
  }
})
```

### Chaining with other commands

```javascript
cy.env(['baseUrl']).then(({ baseUrl }) => {
  cy.visit(baseUrl)
  cy.get('h1').should('be.visible')
})
```

### Use cy.env in custom commands

Create custom commands that use `cy.env()`:

```javascript
// cypress/support/commands.js
Cypress.Commands.add('apiRequest', (endpoint, options = {}) => {
  cy.env(['apiUrl', 'apiKey']).then(({ apiUrl, apiKey }) => {
    cy.request({
      url: `${apiUrl}${endpoint}`,
      headers: {
        Authorization: `Bearer ${apiKey}`,
        ...options.headers,
      },
      ...options,
    })
  })
})

// In your test
cy.apiRequest('/users').its('status').should('eq', 200)
```

### Suppress command logging

Hide the command from the command log:

```javascript
cy.env(['apiKey'], { log: false }).then(({ apiKey }) => {
  // The command and variable name won't appear in command log
})
```

## Why use cy.env()?

`cy.env()` was introduced to replace the deprecated `Cypress.env()` API.

### Secure access to sensitive values

Unlike [`Cypress.env()`](/api/cypress-api/env), which hydrates **all** environment variables into the browser:

- `cy.env()` only exposes the variables you explicitly request
- Variables are not automatically serialized into browser state
- Only requested variables are passed into `cy.origin()` contexts
- Sensitive data is easier to audit and control

This reduces accidental exposure and limits the blast radius of secrets.

### When to use cy.env() vs Cypress.expose()

<CypressEnvVsCypressExpose />

See [`Cypress.expose()`](/api/cypress-api/expose) for more details.

## Migrate from Cypress.env()

`cy.env()` replaces the deprecated [`Cypress.env()`](/api/cypress-api/env) API.

After migrating all usages, you can prevent future use of `Cypress.env()` by disabling it in Cypress configuration using the `allowCypressEnv` option:

:::cypress-config-example

```javascript
{
  allowCypressEnv: false,
}
```

:::

See the [Migration Guide](/app/references/migration-guide#Migrating-away-from-Cypressenv) for detailed migration instructions.

## Notes

### Read-only behavior

`cy.env()` is **read-only** and cannot set environment variables at runtime.

See the [Environment Variables & Secrets](/app/guides/environment-variables) guide for more details on setting environment variables.

### Test configuration overrides

Environment variables cannot be set using [test configuration](/app/references/configuration#Test-Configuration) when `allowCypressEnv` is set to `false`. This is a security feature to prevent exposing sensitive data through test configuration.

### Case sensitivity

Variable names are case-sensitive and must match exactly how they are defined in your configuration:

```javascript
// Configuration
{
  env: {
    apiUrl: 'https://api.example.com',
    API_URL: 'https://api.example.com',  // ❌ Different variable
  }
}

// In test
cy.env(['apiUrl'])  // ✅ Gets 'https://api.example.com'
cy.env(['API_URL']) // ❌ Gets 'https://api.example.com' (different variable)
```

## History

| Version                                      | Changes                  |
| -------------------------------------------- | ------------------------ |
| [15.10.0](/app/references/changelog#15-10-0) | `cy.env()` command added |

## See also

- [`Cypress.env()`](/api/cypress-api/env) (deprecated)
- [`Cypress.expose()`](/api/cypress-api/expose)
- [Configuration](/app/references/configuration)
- [Migration Guide: migrating away from `Cypress.env()`](/app/references/migration-guide#Migrating-away-from-Cypressenv)
