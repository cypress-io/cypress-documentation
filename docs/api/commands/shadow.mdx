---
title: shadow
---

Traverse into the shadow DOM of an element.

## Syntax {#Syntax}

```javascript
.shadow(selector)
.shadow(selector, options)
```

### Usage {#Usage}

**<Icon name="check-circle" color="green" /> Correct Usage**

```javascript
cy.get('.shadow-host').shadow()
```

**<Icon name="exclamation-triangle" color="red" /> Incorrect Usage**

```javascript
cy.shadow() // Errors, cannot be chained off 'cy'
cy.exec('npm start').shadow() // Errors, 'exec' does not yield DOM element
cy.get('.not-a-shadow-host').shadow() // Errors, subject must host a shadow root
```

### Yields [<Icon name="question-circle"/>](/guides/core-concepts/introduction-to-cypress#Subject-Management) {#Yields-Icon-namequestion-circle}

- `.shadow()` yields the new DOM element(s) it found.

## Examples {#Examples}

### Find and click on a button inside the shadow DOM {#Find-and-click-on-a-button-inside-the-shadow-DOM}

```html
<div class="shadow-host">
  #shadow-root
  <button class="my-button">Click me</button>
</div>
```

```javascript
// yields [#shadow-root (open)]
cy.get('.shadow-host').shadow().find('.my-button').click()
```

## Rules {#Rules}

### Requirements [<Icon name="question-circle"/>](/guides/core-concepts/introduction-to-cypress#Chains-of-Commands) {#Requirements-Icon-namequestion-circle}

- `.shadow()` requires being chained off a command that yields a DOM
element that is a shadow host (i.e. has a shadow root directly attached to
it).

### Assertions [<Icon name="question-circle"/>](/guides/core-concepts/introduction-to-cypress#Assertions) {#Assertions-Icon-namequestion-circle}

- `.shadow()` will automatically
[retry](/guides/core-concepts/retry-ability) until the element(s)
[exist in the DOM](/guides/core-concepts/introduction-to-cypress#Default-Assertions)</li><li>`.shadow()`
will automatically [retry](/guides/core-concepts/retry-ability) until the
element(s) host(s) a shadow root.</li><li>`.shadow()` will automatically
[retry](/guides/core-concepts/retry-ability) until all chained assertions have
passed

### Timeouts [<Icon name="question-circle"/>](/guides/core-concepts/introduction-to-cypress#Timeouts) {#Timeouts-Icon-namequestion-circle}

- `.shadow()` can time out waiting for the element(s) to
[exist in the DOM](/guides/core-concepts/introduction-to-cypress#Default-Assertions).</li><li>`.shadow()`
can time out waiting for the element(s) to host a shadow
root.</li><li>`.shadow()` can time out waiting for assertions you've added to
pass.

## Known Issue {#Known-Issue}

When working with `cy.click()`, it sometimes won't click the right element in
Chrome. It's happening because of
[the ambiguity in spec](https://bugs.chromium.org/p/chromium/issues/detail?id=1188919&q=shadowRoot%20elementFromPoint&can=2).

In this case, pass `{ position: 'top' }` to `cy.click()` like below:

```js
cy.get('#element')
  .shadow()
  .find('[data-test-id="my-button"]')
  .click({ position: 'top' })
```

## Command Log {#Command-Log}

**_Traverse into the shadow DOM of an element_**

```javascript
cy.get('.shadow-host').shadow()
```

The commands above will display in the Command Log as:

<DocsImage src="/img/api/shadow/shadow-command-log.png" alt="Command Log shadow" ></DocsImage>

When clicking on the `shadow` command within the command log, the console
outputs the following:

<DocsImage src="/img/api/shadow/shadow-in-console.png" alt="console.log shadow" ></DocsImage>

## See also {#See-also}

- [`cy.get()`](/api/commands/get#Arguments) with `includeShadowDom` option
- [`cy.find()`](/api/commands/find#Arguments) with `includeShadowDom` option
- [`cy.contains()`](/api/commands/contains#Arguments) with `includeShadowDom`
  option
- [`includeShadowDom` config option](/guides/references/configuration#Global)
